{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","document","addEventListener","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginado","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","seccAnt","querySelector","classList","remove","add","tabAnt","querySelectorAll","forEach","enlace","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nomServ","createElement","textContent","prec","servicioDiv","idServicio","appendChild","onclick","seleccionarServicio","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","objeto","pagS","pagA","divResumen","firstChild","removeChild","Object","values","includes","noServicios","hedTit","innerHTML","servCita","hedSer","total","conServ","textServ","precServ","tot","split","trim","totalPaga","nomTexto","value","length","mostrarAlerta","alerta","msj","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","year","getFullYear","mes","getMonth","getDate","m","d","toString","diaDesh","min","inputHora"],"mappings":"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","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst cita = {\r\n   nombre: '', fecha: '', hora: '', servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => iniciarApp());\r\n\r\nconst iniciarApp = () => {\r\n   mostrarServicios();\r\n   //Resaltar la seccion actual\r\n   mostrarSeccion();\r\n   //Ocultar o  mostrar una seccion segun el tab que se preciona\r\n   cambiarSeccion();\r\n   //Paginacion siguiente y anterior\r\n   paginaSiguiente();\r\n   paginaAnterior();\r\n   //Verificar la pagina actual para ocultar o mostrar la paginacion\r\n   botonesPaginado();\r\n   //Muestra el resumen o msj de error\r\n   mostrarResumen();\r\n   //Almacena el nombre del cliente\r\n   nombreCita();\r\n   //Almacena la fecha de cita en el objeto\r\n   fechaCita();\r\n   //Deshabilitar dias pasados\r\n   deshabilitarFechaAnterior();\r\n   //Almacenar la hora en la cita\r\n   horaCita();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\r\n   //Eliminar .mostrar-seccion de la seccion anterior\r\n   const seccAnt = document.querySelector('.mostrar-seccion');\r\n   if(seccAnt) {\r\n      seccAnt.classList.remove('mostrar-seccion');\r\n   }\r\n\r\n   const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n   seccionActual.classList.add('mostrar-seccion');\r\n\r\n   const tabAnt = document.querySelector('.tabs .actual');\r\n   //Eliminar .actual en el tab anterior\r\n   if(tabAnt) {\r\n      tabAnt.classList.remove('actual');\r\n   }\r\n\r\n   //resaltar el tab actual\r\n   const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n   tab.classList.add('actual');\r\n}\r\n\r\nfunction cambiarSeccion() {\r\n   const enlaces = document.querySelectorAll('.tabs button');\r\n   enlaces.forEach(enlace => {\r\n      enlace.addEventListener('click', e =>{\r\n         e.preventDefault();\r\n         pagina = parseInt(e.target.dataset.paso);\r\n\r\n         mostrarSeccion();\r\n\r\n         botonesPaginado();\r\n      });\r\n   });\r\n}\r\n\r\nasync function mostrarServicios(){\r\n   try {\r\n      const resultado = await fetch('../servicios.json');\r\n      const db = await resultado.json();\r\n      const {servicios} = db;\r\n      //Generar el html\r\n      servicios.forEach(servicio => {\r\n         const {id, nombre, precio} = servicio;\r\n\r\n         //Comienzo del DOM scripting\r\n         //Generando el nombre del servicio\r\n         const nomServ = document.createElement('P');\r\n         nomServ.textContent = nombre;\r\n         nomServ.classList.add('nombre-servicio');\r\n         //Precio del servicio\r\n         const prec = document.createElement('P');\r\n         prec.textContent = `$ ${precio}`;\r\n         prec.classList.add('precio-servicio');\r\n\r\n         //Generando el div que contine los servicios\r\n         const servicioDiv = document.createElement('DIV');\r\n         servicioDiv.classList.add('servicio');\r\n         servicioDiv.dataset.idServicio = id;\r\n\r\n         //Inyectar nombre y precio al div\r\n         servicioDiv.appendChild(nomServ);\r\n         servicioDiv.appendChild(prec);\r\n\r\n         //Inyectar el div de servicios en el HTML\r\n         document.querySelector('#servicios').appendChild(servicioDiv);\r\n\r\n         //Seleccionar un servicio\r\n         servicioDiv.onclick = seleccionarServicio;\r\n      });\r\n   } catch (error) {\r\n      console.log(error);\r\n   }\r\n}\r\n\r\nconst seleccionarServicio = e => {\r\n   let elemento;\r\n\r\n   if(e.target.tagName === 'P') {\r\n      elemento = e.target.parentElement;\r\n   }\r\n   else {\r\n      elemento = e.target;\r\n   }\r\n\r\n   if(elemento.classList.contains('seleccionado')) {\r\n      elemento.classList.remove('seleccionado');\r\n      const id = parseInt(elemento.dataset.idServicio);\r\n      eliminarServicio(id);\r\n   }\r\n   else {\r\n      elemento.classList.add('seleccionado');\r\n\r\n      const servicioObj = {\r\n         id: parseInt(elemento.dataset.idServicio),\r\n         nombre: elemento.firstElementChild.textContent,\r\n         precio: elemento.firstElementChild.nextElementSibling.textContent\r\n      }\r\n\r\n      agregarServicio(servicioObj);\r\n   }\r\n}\r\n\r\nfunction eliminarServicio(id) {\r\n   //console.log(`Eliminando.. ${id}`);\r\n   const {servicios} = cita;\r\n   cita.servicios = servicios.filter(servicio => servicio.id !== id);\r\n   //console.log(cita);\r\n}\r\n\r\nfunction agregarServicio(objeto) {\r\n   const {servicios} = cita;\r\n   cita.servicios = [...servicios, objeto];\r\n   // console.log(cita);\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n   const pagS = document.querySelector('#siguiente');\r\n   pagS.addEventListener('click', () => {\r\n      pagina++;\r\n      botonesPaginado()\r\n   });\r\n}\r\n\r\nfunction paginaAnterior() {\r\n   const pagA = document.querySelector('#anterior');\r\n   pagA.addEventListener('click', () => {\r\n      pagina--;\r\n      botonesPaginado()\r\n   });\r\n}\r\n\r\nfunction botonesPaginado() {\r\n   const pagS = document.querySelector('#siguiente');\r\n   const pagA = document.querySelector('#anterior');\r\n\r\n   if(pagina === 1) {\r\n      pagA.classList.add('ocultar');\r\n   }\r\n   else if(pagina === 3) {\r\n      pagA.classList.remove('ocultar');\r\n      pagS.classList.add('ocultar');\r\n      mostrarResumen();\r\n   }\r\n   else{\r\n      pagA.classList.remove('ocultar');\r\n      pagS.classList.remove('ocultar');\r\n   }\r\n\r\n   mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen() {\r\n   const {nombre, fecha, hora, servicios} = cita;\r\n\r\n   const divResumen = document.querySelector('.contenido-resumen');\r\n   //Limpiar el HTML\r\n   while(divResumen.firstChild) {\r\n      divResumen.removeChild(divResumen.firstChild);\r\n   }\r\n\r\n   //Validacion de objetos\r\n   if(Object.values(cita).includes('')) {\r\n      const noServicios = document.createElement('P');\r\n      noServicios.textContent = 'Faltan datos';\r\n      noServicios.classList.add('invalidar-cita', 'text-center');\r\n      //agregar a resumen div\r\n      divResumen.appendChild(noServicios);\r\n      return;\r\n   }\r\n   //Mostrar el resumen\r\n   const hedTit = document.createElement('H2');\r\n   hedTit.textContent = 'Resumen';\r\n   const nombreCita = document.createElement('P');\r\n   nombreCita.innerHTML = `<span>Nombre: </span>${nombre}`;\r\n   const fechaCita = document.createElement('P');\r\n   fechaCita.innerHTML = `<span>Fecha: </span>${fecha}`;\r\n   const horaCita = document.createElement('P');\r\n   horaCita.innerHTML = `<span>Hora: </span>${hora}`;\r\n\r\n   const servCita = document.createElement('DIV');\r\n   servCita.classList.add('resumen-servicios');\r\n\r\n   const hedSer = document.createElement('H3');\r\n   hedSer.textContent = 'Servicios seleccionados';\r\n   servCita.appendChild(hedSer);\r\n   let total = 0;\r\n   //Iterar sobre el arreglo de servicios\r\n   servicios.forEach(servicio => {\r\n\r\n      const {nombre, precio} = servicio;\r\n      const conServ = document.createElement('DIV');\r\n      conServ.classList.add('contenedor-servicio');\r\n\r\n      const textServ = document.createElement('P');\r\n      textServ.textContent = nombre;\r\n      const precServ = document.createElement('P');\r\n      precServ.classList.add('precio');\r\n      precServ.textContent = precio;\r\n      const tot = precio.split('$');\r\n      total += parseInt(tot[1].trim());\r\n      conServ.appendChild(textServ);\r\n      conServ.appendChild(precServ);\r\n      servCita.appendChild(conServ);\r\n   });\r\n\r\n   divResumen.appendChild(hedTit);\r\n   divResumen.appendChild(nombreCita);\r\n   divResumen.appendChild(fechaCita);\r\n   divResumen.appendChild(horaCita);\r\n   divResumen.appendChild(servCita);\r\n\r\n   const totalPaga = document.createElement('P');\r\n   totalPaga.classList.add('total');\r\n   totalPaga.innerHTML = `<span>Total: </span>$${total}`;\r\n   divResumen.appendChild(totalPaga);\r\n\r\n}\r\n\r\nfunction nombreCita(){\r\n   const nombreInput = document.querySelector('#nombre');\r\n   nombreInput.addEventListener('input', e => {\r\n      const nomTexto = e.target.value.trim();\r\n      // console.log(nomTexto);\r\n      //Validar que nombreTexto tenga un valor\r\n      if(nomTexto === '' || nomTexto.length < 3) {\r\n         mostrarAlerta('Llene el campo correctamente', 1);\r\n      }\r\n      else {\r\n         // console.log('Valido');\r\n         const alerta = document.querySelector('.alerta');\r\n         if(alerta) {\r\n            alerta.remove();\r\n         }\r\n         cita.nombre = nomTexto;\r\n         // console.log(cita);\r\n      }\r\n   });\r\n}\r\n\r\nfunction mostrarAlerta(msj, tipo) {\r\n   //Si ya hay una alerta no mostrar otra\r\n   let alertaPrevia = document.querySelector('.alerta');\r\n   if(alertaPrevia) {\r\n      return;\r\n   }\r\n\r\n   const alerta = document.createElement('DIV');\r\n   alerta.textContent = msj;\r\n   alerta.classList.add('alerta');\r\n   //Para el tipo 1 significa error y 2 significa nice :)\r\n   if(parseInt(tipo) === 1) {\r\n      alerta.classList.add('error');\r\n   }\r\n   else if(parseInt(tipo) === 2) {\r\n      alerta.classList.add('nice');\r\n   }\r\n   const formulario = document.querySelector('.formulario');\r\n   formulario.appendChild(alerta);\r\n\r\n   //Eliminar la alerta despues de 3 segundos\r\n   setTimeout(() => {\r\n      alerta.remove();\r\n   }, 3000);\r\n}\r\n\r\nfunction fechaCita(){\r\n   const fechaInput = document.querySelector('#fecha');\r\n   fechaInput.addEventListener('input', e =>{\r\n      const dia = new Date(e.target.value).getUTCDay();\r\n      if([0, 6].includes(dia)) {\r\n         e.preventDefault();\r\n         fechaInput.value = '';\r\n         mostrarAlerta(\"Los fines de semana no abrimos\", 1);\r\n      }\r\n      else {\r\n         cita.fecha = fechaInput.value;\r\n         console.log(cita)\r\n      }\r\n   });\r\n}\r\n\r\nfunction deshabilitarFechaAnterior() {\r\n\r\n   const fecha = new Date();\r\n   const year = fecha.getFullYear();\r\n   const mes = fecha.getMonth() + 1;\r\n   const dia = fecha.getDate();\r\n   let m, d;\r\n\r\n   //ahora le agregas un 0 para el formato date\r\n   if (mes < 10) m = `0${mes}`;\r\n   else m = mes.toString;\r\n\r\n   if(dia < 10) d = `0${dia}`;\r\n   else d = dia.toString();\r\n\r\n   let diaDesh = `${year}-${m}-${d}`;\r\n   document.querySelector('#fecha').min = diaDesh;\r\n}\r\n\r\nfunction horaCita() {\r\n   const inputHora = document.querySelector('#hora');\r\n   inputHora.addEventListener('input', e => {\r\n      const horaCita = e.target.value;\r\n      const hora = horaCita.split(':');\r\n      if(hora[0] < 9 || hora[0] > 21) {\r\n         mostrarAlerta('La hora no es valida', 1);\r\n         setTimeout(() => {\r\n            inputHora.value = '';\r\n         }, 3000);\r\n      }\r\n      else {\r\n         cita.hora = horaCita;\r\n      }\r\n   });\r\n}"]}