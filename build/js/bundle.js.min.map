{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","document","addEventListener","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginado","mostrarResumen","nombreCita","seccAnt","querySelector","classList","remove","add","tabAnt","querySelectorAll","forEach","enlace","e","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nomServ","createElement","textContent","prec","servicioDiv","idServicio","appendChild","onclick","seleccionarServicio","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","filter","objeto","pagS","pagA","divResumen","Object","values","includes","noServicios","nomTexto","value","trim","length","mostrarAlerta","alerta","msj","tipo","setTimeout"],"mappings":"AAAA,IAAAA,OAAA,EAEA,MAAAC,KAAA,CACAC,OAAA,GAAAC,MAAA,GAAAC,KAAA,GAAAC,UAAA,IAGAC,SAAAC,iBAAA,mBAAA,IAAAC,cAEA,MAAAA,WAAA,KACAC,mBAEAC,iBAEAC,iBAEAC,kBACAC,iBAEAC,kBAEAC,iBAEAC,cAGA,SAAAN,iBAGA,MAAAO,EAAAX,SAAAY,cAAA,oBACAD,GACAA,EAAAE,UAAAC,OAAA,mBAGAd,SAAAY,cAAA,SAAAlB,QACAmB,UAAAE,IAAA,mBAEA,MAAAC,EAAAhB,SAAAY,cAAA,iBAEAI,GACAA,EAAAH,UAAAC,OAAA,UAIAd,SAAAY,cAAA,eAAAlB,YACAmB,UAAAE,IAAA,UAGA,SAAAV,iBACAL,SAAAiB,iBAAA,gBACAC,QAAAC,IACAA,EAAAlB,iBAAA,QAAAmB,IACAA,EAAAC,iBACA3B,OAAA4B,SAAAF,EAAAG,OAAAC,QAAAC,MAEArB,iBAEAI,sBAKAkB,eAAAvB,mBACA,IACA,MAAAwB,QAAAC,MAAA,qBACAC,QAAAF,EAAAG,QACA/B,UAAAA,GAAA8B,EAEA9B,EAAAmB,QAAAa,IACA,MAAAC,GAAAA,EAAApC,OAAAA,EAAAqC,OAAAA,GAAAF,EAIAG,EAAAlC,SAAAmC,cAAA,KACAD,EAAAE,YAAAxC,EACAsC,EAAArB,UAAAE,IAAA,mBAEA,MAAAsB,EAAArC,SAAAmC,cAAA,KACAE,EAAAD,YAAA,KAAAH,EACAI,EAAAxB,UAAAE,IAAA,mBAGA,MAAAuB,EAAAtC,SAAAmC,cAAA,OACAG,EAAAzB,UAAAE,IAAA,YACAuB,EAAAd,QAAAe,WAAAP,EAGAM,EAAAE,YAAAN,GACAI,EAAAE,YAAAH,GAGArC,SAAAY,cAAA,cAAA4B,YAAAF,GAGAA,EAAAG,QAAAC,sBAEA,MAAAC,GACAC,QAAAC,IAAAF,IAIA,MAAAD,oBAAAtB,IACA,IAAA0B,EASA,GANAA,EADA,MAAA1B,EAAAG,OAAAwB,QACA3B,EAAAG,OAAAyB,cAGA5B,EAAAG,OAGAuB,EAAAjC,UAAAoC,SAAA,gBAAA,CACAH,EAAAjC,UAAAC,OAAA,gBAEAoC,iBADA5B,SAAAwB,EAAAtB,QAAAe,iBAGA,CACAO,EAAAjC,UAAAE,IAAA,gBAQAoC,gBANA,CACAnB,GAAAV,SAAAwB,EAAAtB,QAAAe,YACA3C,OAAAkD,EAAAM,kBAAAhB,YACAH,OAAAa,EAAAM,kBAAAC,mBAAAjB,gBAOA,SAAAc,iBAAAlB,GAEA,MAAAjC,UAAAA,GAAAJ,KACAA,KAAAI,UAAAA,EAAAuD,OAAAvB,GAAAA,EAAAC,KAAAA,GAIA,SAAAmB,gBAAAI,GACA,MAAAxD,UAAAA,GAAAJ,KACAA,KAAAI,UAAA,IAAAA,EAAAwD,GAIA,SAAAjD,kBACAN,SAAAY,cAAA,cACAX,iBAAA,QAAA,KACAP,SACAc,oBAIA,SAAAD,iBACAP,SAAAY,cAAA,aACAX,iBAAA,QAAA,KACAP,SACAc,oBAIA,SAAAA,kBACA,MAAAgD,EAAAxD,SAAAY,cAAA,cACA6C,EAAAzD,SAAAY,cAAA,aAEA,IAAAlB,OACA+D,EAAA5C,UAAAE,IAAA,WAEA,IAAArB,QACA+D,EAAA5C,UAAAC,OAAA,WACA0C,EAAA3C,UAAAE,IAAA,aAGA0C,EAAA5C,UAAAC,OAAA,WACA0C,EAAA3C,UAAAC,OAAA,YAGAV,iBAGA,SAAAK,iBACA,MAAAb,OAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAAC,UAAAA,GAAAJ,KAEA+D,EAAA1D,SAAAY,cAAA,sBAEA,GAAA+C,OAAAC,OAAAjE,MAAAkE,SAAA,IAAA,CACA,MAAAC,EAAA9D,SAAAmC,cAAA,KACA2B,EAAA1B,YAAA,eACA0B,EAAAjD,UAAAE,IAAA,iBAAA,eAEA2C,EAAAlB,YAAAsB,IAIA,SAAApD,aACAV,SAAAY,cAAA,WACAX,iBAAA,QAAAmB,IACA,MAAA2C,EAAA3C,EAAAG,OAAAyC,MAAAC,OAGA,GAAA,KAAAF,GAAAA,EAAAG,OAAA,EACAC,cAAA,+BAAA,OAEA,CAEA,MAAAC,EAAApE,SAAAY,cAAA,WACAwD,GACAA,EAAAtD,SAEAnB,KAAAC,OAAAmE,KAMA,SAAAI,cAAAE,EAAAC,GAGA,GADAtE,SAAAY,cAAA,WAEA,OAGA,MAAAwD,EAAApE,SAAAmC,cAAA,OACAiC,EAAAhC,YAAAiC,EACAD,EAAAvD,UAAAE,IAAA,UAEA,IAAAO,SAAAgD,GACAF,EAAAvD,UAAAE,IAAA,SAEA,IAAAO,SAAAgD,IACAF,EAAAvD,UAAAE,IAAA,QAEAf,SAAAY,cAAA,eACA4B,YAAA4B,GAGAG,WAAA,KACAH,EAAAtD,UACA","file":"bundle.js","sourcesContent":["let pagina = 1;\r\n\r\nconst cita = {\r\n   nombre: '', fecha: '', hora: '', servicios: []\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => iniciarApp());\r\n\r\nconst iniciarApp = () => {\r\n   mostrarServicios();\r\n   //Resaltar la seccion actual\r\n   mostrarSeccion();\r\n   //Ocultar o  mostrar una seccion segun el tab que se preciona\r\n   cambiarSeccion();\r\n   //Paginacion siguiente y anterior\r\n   paginaSiguiente();\r\n   paginaAnterior();\r\n   //Verificar la pagina actual para ocultar o mostrar la paginacion\r\n   botonesPaginado();\r\n   //Muestra el resumen o msj de error\r\n   mostrarResumen();\r\n   //Almacena el nombre del cliente\r\n   nombreCita();\r\n}\r\n\r\nfunction mostrarSeccion() {\r\n\r\n   //Eliminar .mostrar-seccion de la seccion anterior\r\n   const seccAnt = document.querySelector('.mostrar-seccion');\r\n   if(seccAnt) {\r\n      seccAnt.classList.remove('mostrar-seccion');\r\n   }\r\n\r\n   const seccionActual = document.querySelector(`#paso-${pagina}`);\r\n   seccionActual.classList.add('mostrar-seccion');\r\n\r\n   const tabAnt = document.querySelector('.tabs .actual');\r\n   //Eliminar .actual en el tab anterior\r\n   if(tabAnt) {\r\n      tabAnt.classList.remove('actual');\r\n   }\r\n\r\n   //resaltar el tab actual\r\n   const tab = document.querySelector(`[data-paso=\"${pagina}\"]`);\r\n   tab.classList.add('actual');\r\n}\r\n\r\nfunction cambiarSeccion() {\r\n   const enlaces = document.querySelectorAll('.tabs button');\r\n   enlaces.forEach(enlace => {\r\n      enlace.addEventListener('click', e =>{\r\n         e.preventDefault();\r\n         pagina = parseInt(e.target.dataset.paso);\r\n\r\n         mostrarSeccion();\r\n\r\n         botonesPaginado();\r\n      });\r\n   });\r\n}\r\n\r\nasync function mostrarServicios(){\r\n   try {\r\n      const resultado = await fetch('../servicios.json');\r\n      const db = await resultado.json();\r\n      const {servicios} = db;\r\n      //Generar el html\r\n      servicios.forEach(servicio => {\r\n         const {id, nombre, precio} = servicio;\r\n\r\n         //Comienzo del DOM scripting\r\n         //Generando el nombre del servicio\r\n         const nomServ = document.createElement('P');\r\n         nomServ.textContent = nombre;\r\n         nomServ.classList.add('nombre-servicio');\r\n         //Precio del servicio\r\n         const prec = document.createElement('P');\r\n         prec.textContent = `$ ${precio}`;\r\n         prec.classList.add('precio-servicio');\r\n\r\n         //Generando el div que contine los servicios\r\n         const servicioDiv = document.createElement('DIV');\r\n         servicioDiv.classList.add('servicio');\r\n         servicioDiv.dataset.idServicio = id;\r\n\r\n         //Inyectar nombre y precio al div\r\n         servicioDiv.appendChild(nomServ);\r\n         servicioDiv.appendChild(prec);\r\n\r\n         //Inyectar el div de servicios en el HTML\r\n         document.querySelector('#servicios').appendChild(servicioDiv);\r\n\r\n         //Seleccionar un servicio\r\n         servicioDiv.onclick = seleccionarServicio;\r\n      });\r\n   } catch (error) {\r\n      console.log(error);\r\n   }\r\n}\r\n\r\nconst seleccionarServicio = e => {\r\n   let elemento;\r\n\r\n   if(e.target.tagName === 'P') {\r\n      elemento = e.target.parentElement;\r\n   }\r\n   else {\r\n      elemento = e.target;\r\n   }\r\n\r\n   if(elemento.classList.contains('seleccionado')) {\r\n      elemento.classList.remove('seleccionado');\r\n      const id = parseInt(elemento.dataset.idServicio);\r\n      eliminarServicio(id);\r\n   }\r\n   else {\r\n      elemento.classList.add('seleccionado');\r\n\r\n      const servicioObj = {\r\n         id: parseInt(elemento.dataset.idServicio),\r\n         nombre: elemento.firstElementChild.textContent,\r\n         precio: elemento.firstElementChild.nextElementSibling.textContent\r\n      }\r\n\r\n      agregarServicio(servicioObj);\r\n   }\r\n}\r\n\r\nfunction eliminarServicio(id) {\r\n   //console.log(`Eliminando.. ${id}`);\r\n   const {servicios} = cita;\r\n   cita.servicios = servicios.filter(servicio => servicio.id !== id);\r\n   //console.log(cita);\r\n}\r\n\r\nfunction agregarServicio(objeto) {\r\n   const {servicios} = cita;\r\n   cita.servicios = [...servicios, objeto];\r\n   // console.log(cita);\r\n}\r\n\r\nfunction paginaSiguiente() {\r\n   const pagS = document.querySelector('#siguiente');\r\n   pagS.addEventListener('click', () => {\r\n      pagina++;\r\n      botonesPaginado()\r\n   });\r\n}\r\n\r\nfunction paginaAnterior() {\r\n   const pagA = document.querySelector('#anterior');\r\n   pagA.addEventListener('click', () => {\r\n      pagina--;\r\n      botonesPaginado()\r\n   });\r\n}\r\n\r\nfunction botonesPaginado() {\r\n   const pagS = document.querySelector('#siguiente');\r\n   const pagA = document.querySelector('#anterior');\r\n\r\n   if(pagina === 1) {\r\n      pagA.classList.add('ocultar');\r\n   }\r\n   else if(pagina === 3) {\r\n      pagA.classList.remove('ocultar');\r\n      pagS.classList.add('ocultar');\r\n   }\r\n   else{\r\n      pagA.classList.remove('ocultar');\r\n      pagS.classList.remove('ocultar');\r\n   }\r\n\r\n   mostrarSeccion();\r\n}\r\n\r\nfunction mostrarResumen() {\r\n   const {nombre, fecha, hora, servicios} = cita;\r\n\r\n   const divResumen = document.querySelector('.contenido-resumen');\r\n   //Validacion de objetos\r\n   if(Object.values(cita).includes('')) {\r\n      const noServicios = document.createElement('P');\r\n      noServicios.textContent = 'Faltan datos';\r\n      noServicios.classList.add('invalidar-cita', 'text-center');\r\n      //agregar a resumen div\r\n      divResumen.appendChild(noServicios);\r\n   }\r\n}\r\n\r\nfunction nombreCita(){\r\n   const nombreInput = document.querySelector('#nombre');\r\n   nombreInput.addEventListener('input', e => {\r\n      const nomTexto = e.target.value.trim();\r\n      // console.log(nomTexto);\r\n      //Validar que nombreTexto tenga un valor\r\n      if(nomTexto === '' || nomTexto.length < 3) {\r\n         mostrarAlerta('Llene el campo correctamente', 1);\r\n      }\r\n      else {\r\n         // console.log('Valido');\r\n         const alerta = document.querySelector('.alerta');\r\n         if(alerta) {\r\n            alerta.remove();\r\n         }\r\n         cita.nombre = nomTexto;\r\n         // console.log(cita);\r\n      }\r\n   });\r\n}\r\n\r\nfunction mostrarAlerta(msj, tipo) {\r\n   //Si ya hay una alerta no mostrar otra\r\n   let alertaPrevia = document.querySelector('.alerta');\r\n   if(alertaPrevia) {\r\n      return;\r\n   }\r\n\r\n   const alerta = document.createElement('DIV');\r\n   alerta.textContent = msj;\r\n   alerta.classList.add('alerta');\r\n   //Para el tipo 1 significa error y 2 significa nice :)\r\n   if(parseInt(tipo) === 1) {\r\n      alerta.classList.add('error');\r\n   }\r\n   else if(parseInt(tipo) === 2) {\r\n      alerta.classList.add('nice');\r\n   }\r\n   const formulario = document.querySelector('.formulario');\r\n   formulario.appendChild(alerta);\r\n\r\n   //Eliminar la alerta despues de 3 segundos\r\n   setTimeout(() => {\r\n      alerta.remove();\r\n   }, 3000);\r\n}"]}